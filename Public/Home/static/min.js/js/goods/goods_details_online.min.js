$(function(){
    $(".w_small_img li").mousemove(function () {
        var a = $(this).index(".w_small_img li");
        $(".w_small_img li").removeClass("w_small_color");
        $(this).addClass("w_small_color");
        $(".w_big_img dd").css({
            display: "none"
        });
        $($(".w_big_img dd")[a]).css({
            display: "block"
        });
        $(".w_modified").css({
            left: ($(".w_small_img li").outerWidth() + 12) * a + 38
        })
    });
})
function gotoCart(b) {
    gotoCartOrder(b);
}
function bugTimesInput() {
    if (!$(".w_detailsinputs").val() || isNaN($(".w_detailsinputs").val())) $(".w_detailsinputs").val($(".w_detailsinputs").attr("min"));
    else {
        var b = parseInt($(".w_detailsinputs").attr("max")),
            a = parseInt($(".w_detailsinputs").attr("min"));
        0 != parseInt($(".w_detailsinputs").val()) % a && $(".w_detailsinputs").val(parseInt(parseInt($(".w_detailsinputs").val()) / a) * a);
        parseInt($(".w_detailsinputs").val()) > b && $(".w_detailsinputs").val(b);
        parseInt($(".w_detailsinputs").val()) < a && $(".w_detailsinputs").val(a)
    }
    change_input()
}
var sttims = null,
    _times = !0;

function change_input() {
    null != sttims && (clearTimeout(sttims), sttims = null);
    var b = (parseFloat($(".w_detailsinputs").val() * parseInt($("#cart_priceArea").val())) / parseFloat($("#cart_priceTotal").text()) * 100).toFixed(3);
    $(".y-hide-span span").html("\u83b7\u5f97\u673a\u7387" + (.001 <= b ? b : "\x3c0.001") + "%\x3ci\x3e\x3c/i\x3e");
    _times && $(".y-hide-span").show(10, function () {
        sttims = setTimeout(function () {
            $(".y-hide-span").fadeOut("slow");
            sttims = null
        }, 3E3)
    })
}

function addBuyTimes() {
    var b = parseInt($(".w_detailsinputs").attr("max")),
        a = parseInt($(".w_detailsinputs").attr("min"));
    b - parseInt($(".w_detailsinputs").val()) >= a && $(".w_detailsinputs").val(parseInt($(".w_detailsinputs").val()) + a);
    change_input()
}

function cutBuyTimes() {
    var b = parseInt($(".w_detailsinputs").attr("min"));
    0 < parseInt($(".w_detailsinputs").val()) - b && $(".w_detailsinputs").val(parseInt($(".w_detailsinputs").val()) - b);
    change_input()
}

function cartoon() {
    var d = $("#mid").val();
    var c = $("#sta").val();
    if(null != d && "" != d){
        if(c == '2'){//账号处于激活状态
            var b = $("#gid").val();
            addCart(b);
            if ($(".shoppingCartRightFix").is(":visible")) {
                var b = $(".w_slip_out").parents(".w_details_top").find(".w_big_img").css({
                    display: "block"
                }),
                a = b.clone().css("opacity", .75);
                $("body").append(a);
                a.css({
                    "z-index": 9E3,
                    display: "block",
                    position: "absolute",
                    top: b.offset().top + "px",
                    left: b.offset().left + "px",
                    width: b.width() + "px",
                    height: b.height() + "px"
                });
                a.animate({
                    top: $(".shoppingCartRightFix").offset().top,
                    left: $(".shoppingCartRightFix").offset().left,
                    width: 40,
                    height: 37
                },
                "slow",
                function() {
                    a.remove()
                })
            }
        }else if(c == '3'){//账号处于冻结状态
            layer.msg('账号处于冻结状态,请联系管理员解封',{offset: '300px',time: 2000,icon: 7});
        }
    }else{
        go2Login();
    }
}
function cartoons() {
    var d = $("#mid").val();
    var c = $("#sta").val();
    var e = $("#buyNum").val();
    if(null != d && "" != d){
        if(c == '2'){//账号处于激活状态
            var b = $("#gid").val();
            addCarts(b,e);
            if ($(".shoppingCartRightFix").is(":visible")) {
                var b = $(".w_slip_out").parents(".w_details_top").find(".w_big_img").css({
                    display: "block"
                }),
                a = b.clone().css("opacity", .75);
                $("body").append(a);
                a.css({
                    "z-index": 9E3,
                    display: "block",
                    position: "absolute",
                    top: b.offset().top + "px",
                    left: b.offset().left + "px",
                    width: b.width() + "px",
                    height: b.height() + "px"
                });
                a.animate({
                    top: $(".shoppingCartRightFix").offset().top,
                    left: $(".shoppingCartRightFix").offset().left,
                    width: 40,
                    height: 37
                },
                "slow",
                function() {
                    a.remove()
                })
            }
        }else if(c == '3'){//账号处于冻结状态
            layer.msg('账号处于冻结状态,请联系管理员解封',{offset: '300px',time: 2000,icon: 7});
        }
    }else{
        go2Login();
    }
}
